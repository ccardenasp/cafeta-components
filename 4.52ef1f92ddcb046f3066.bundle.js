/*! For license information please see 4.52ef1f92ddcb046f3066.bundle.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{802:function(module,exports,__webpack_require__){(exports=__webpack_require__(23)(!1)).push([module.i,"/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n@define-mixin ck-media-phone {\n\t@media screen and (max-width: 600px) {\n\t\t@mixin-content;\n\t}\n}\n",""]),module.exports=exports},821:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/return-arrow.a320e4b7.svg"},822:function(module,exports,__webpack_require__){var api=__webpack_require__(24),content=__webpack_require__(823);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},823:function(module,exports,__webpack_require__){(exports=__webpack_require__(23)(!1)).push([module.i,'/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n.ck .ck-widget {\n\t/*\n\t * Styles of the type around buttons\n\t */\n\t& .ck-widget__type-around__button {\n\t\tdisplay: block;\n\t\tposition: absolute;\n\t\toverflow: hidden;\n\t\tz-index: var(--ck-z-default);\n\n\t\t& svg {\n\t\t\tposition: absolute;\n\t\t\ttop: 50%;\n\t\t\tleft: 50%;\n\t\t\tz-index: calc(var(--ck-z-default) + 2);\n\t\t}\n\n\t\t&.ck-widget__type-around__button_before {\n\t\t\t/* Place it in the middle of the outline */\n\t\t\ttop: calc(-0.5 * var(--ck-widget-outline-thickness));\n\t\t\tleft: min(10%, 30px);\n\n\t\t\ttransform: translateY(-50%);\n\t\t}\n\n\t\t&.ck-widget__type-around__button_after {\n\t\t\t/* Place it in the middle of the outline */\n\t\t\tbottom: calc(-0.5 * var(--ck-widget-outline-thickness));\n\t\t\tright: min(10%, 30px);\n\n\t\t\ttransform: translateY(50%);\n\t\t}\n\t}\n\n\t/*\n\t * Styles for the buttons when:\n\t * - the widget is selected,\n\t * - or the button is being hovered (regardless of the widget state).\n\t */\n\t&.ck-widget_selected > .ck-widget__type-around > .ck-widget__type-around__button,\n\t& > .ck-widget__type-around > .ck-widget__type-around__button:hover {\n\t\t&::after {\n\t\t\tcontent: "";\n\t\t\tdisplay: block;\n\t\t\tposition: absolute;\n\t\t\ttop: 1px;\n\t\t\tleft: 1px;\n\t\t\tz-index: calc(var(--ck-z-default) + 1);\n\t\t}\n\t}\n\n\t/*\n\t * Styles for the horizontal "fake caret" which is displayed when the user navigates using the keyboard.\n\t */\n\t& > .ck-widget__type-around > .ck-widget__type-around__fake-caret {\n\t\tdisplay: none;\n\t\tposition: absolute;\n\t\tleft: 0;\n\t\tright: 0;\n\t}\n\n\t/*\n\t * When the widget is hovered the "fake caret" would normally be narrower than the\n\t * extra outline displayed around the widget. Let\'s extend the "fake caret" to match\n\t * the full width of the widget.\n\t */\n\t&:hover > .ck-widget__type-around > .ck-widget__type-around__fake-caret {\n\t\tleft: calc( -1 * var(--ck-widget-outline-thickness) );\n\t\tright: calc( -1 * var(--ck-widget-outline-thickness) );\n\t}\n\n\t/*\n\t * Styles for the horizontal "fake caret" when it should be displayed before the widget (backward keyboard navigation).\n\t */\n\t&.ck-widget_type-around_show-fake-caret_before > .ck-widget__type-around > .ck-widget__type-around__fake-caret {\n\t\ttop: calc( -1 * var(--ck-widget-outline-thickness) - 1px );\n\t\tdisplay: block;\n\t}\n\n\t/*\n\t * Styles for the horizontal "fake caret" when it should be displayed after the widget (forward keyboard navigation).\n\t */\n\t&.ck-widget_type-around_show-fake-caret_after > .ck-widget__type-around > .ck-widget__type-around__fake-caret {\n\t\tbottom: calc( -1 * var(--ck-widget-outline-thickness) - 1px );\n\t\tdisplay: block;\n\t}\n}\n\n/*\n * Integration with the read-only mode of the editor.\n */\n.ck.ck-editor__editable.ck-read-only .ck-widget__type-around {\n\tdisplay: none;\n}\n\n/*\n * Integration with the restricted editing mode (feature) of the editor.\n */\n.ck.ck-editor__editable.ck-restricted-editing_mode_restricted .ck-widget__type-around {\n\tdisplay: none;\n}\n\n/*\n * Integration with the #isEnabled property of the WidgetTypeAround plugin.\n */\n.ck.ck-editor__editable.ck-widget__type-around_disabled .ck-widget__type-around {\n\tdisplay: none;\n}\n',""]),module.exports=exports},824:function(module,exports,__webpack_require__){var api=__webpack_require__(24),content=__webpack_require__(825);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},825:function(module,exports,__webpack_require__){(exports=__webpack_require__(23)(!1)).push([module.i,"/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n:root {\n\t--ck-color-resizer: var(--ck-color-focus-border);\n\t--ck-color-resizer-tooltip-background: hsl(0, 0%, 15%);\n\t--ck-color-resizer-tooltip-text: hsl(0, 0%, 95%);\n\n\t--ck-resizer-border-radius: var(--ck-border-radius);\n\t--ck-resizer-tooltip-offset: 10px;\n}\n\n.ck .ck-widget {\n\t/* This is neccessary for type around UI to be positioned properly. */\n\tposition: relative;\n}\n\n.ck .ck-widget.ck-widget_with-selection-handle {\n\t/* Make the widget wrapper a relative positioning container for the drag handle. */\n\tposition: relative;\n\n\t& .ck-widget__selection-handle {\n\t\tposition: absolute;\n\n\t\t& .ck-icon {\n\t\t\t/* Make sure the icon in not a subject to font-size or line-height to avoid\n\t\t\tunnecessary spacing around it. */\n\t\t\tdisplay: block;\n\t\t}\n\t}\n\n\t/* Show the selection handle on mouse hover over the widget. */\n\t&:hover {\n\t\t& .ck-widget__selection-handle {\n\t\t\tvisibility: visible;\n\t\t}\n\t}\n\n\t/* Show the selection handle when the widget is selected. */\n\t&.ck-widget_selected .ck-widget__selection-handle {\n\t\tvisibility: visible;\n\t}\n}\n\n.ck .ck-size-view {\n\tbackground: var(--ck-color-resizer-tooltip-background);\n\tcolor: var(--ck-color-resizer-tooltip-text);\n\tborder: 1px solid var(--ck-color-resizer-tooltip-text);\n\tborder-radius: var(--ck-resizer-border-radius);\n\tfont-size: var(--ck-font-size-tiny);\n\tdisplay: block;\n\tpadding: var(--ck-spacing-small);\n\n\t&.ck-orientation-top-left,\n\t&.ck-orientation-top-right,\n\t&.ck-orientation-bottom-right,\n\t&.ck-orientation-bottom-left {\n\t\tposition: absolute;\n\t}\n\n\t&.ck-orientation-top-left {\n\t\ttop: var(--ck-resizer-tooltip-offset);\n\t\tleft: var(--ck-resizer-tooltip-offset);\n\t}\n\n\t&.ck-orientation-top-right {\n\t\ttop: var(--ck-resizer-tooltip-offset);\n\t\tright: var(--ck-resizer-tooltip-offset);\n\t}\n\n\t&.ck-orientation-bottom-right {\n\t\tbottom: var(--ck-resizer-tooltip-offset);\n\t\tright: var(--ck-resizer-tooltip-offset);\n\t}\n\n\t&.ck-orientation-bottom-left {\n\t\tbottom: var(--ck-resizer-tooltip-offset);\n\t\tleft: var(--ck-resizer-tooltip-offset);\n\t}\n}\n",""]),module.exports=exports},830:function(module,exports,__webpack_require__){var api=__webpack_require__(24),content=__webpack_require__(831);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},831:function(module,exports,__webpack_require__){(exports=__webpack_require__(23)(!1)).push([module.i,"/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n.ck.ck-label {\n\tdisplay: block;\n}\n\n.ck.ck-voice-label {\n\tdisplay: none;\n}\n",""]),module.exports=exports},832:function(module,exports,__webpack_require__){var api=__webpack_require__(24),content=__webpack_require__(833);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},833:function(module,exports,__webpack_require__){(exports=__webpack_require__(23)(!1)).push([module.i,"/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n.ck.ck-labeled-field-view {\n\t& > .ck.ck-labeled-field-view__input-wrapper {\n\t\tdisplay: flex;\n\t\tposition: relative;\n\t}\n\n\t& .ck.ck-label {\n\t\tdisplay: block;\n\t\tposition: absolute;\n\t}\n}\n",""]),module.exports=exports},834:function(module,exports,__webpack_require__){var api=__webpack_require__(24),content=__webpack_require__(835);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},835:function(module,exports,__webpack_require__){(exports=__webpack_require__(23)(!1)).push([module.i,"/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/*\n * Note: This file should contain the wireframe styles only. But since there are no such styles,\n * it acts as a message to the builder telling that it should look for the corresponding styles\n * **in the theme** when compiling the editor.\n */\n",""]),module.exports=exports},850:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/check.155ba9a7.svg"},851:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/cancel.606c2d55.svg"},852:function(module,exports,__webpack_require__){var api=__webpack_require__(24),content=__webpack_require__(853);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},853:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(23),___CSS_LOADER_AT_RULE_IMPORT_0___=__webpack_require__(802);(exports=___CSS_LOADER_API_IMPORT___(!1)).i(___CSS_LOADER_AT_RULE_IMPORT_0___),exports.push([module.i,"/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\r\n\n.ck.ck-text-alternative-form {\n\tdisplay: flex;\n\tflex-direction: row;\n\tflex-wrap: nowrap;\n\n\t& .ck-labeled-field-view {\n\t\tdisplay: inline-block;\n\t}\n\n\t& .ck-label {\n\t\tdisplay: none;\n\t}\n\n\t@mixin ck-media-phone {\n\t\tflex-wrap: wrap;\n\n\t\t& .ck-labeled-field-view {\n\t\t\tflex-basis: 100%;\n\t\t}\n\n\t\t& .ck-button {\n\t\t\tflex-basis: 50%;\n\t\t}\n\t}\n}\n",""]),module.exports=exports},854:function(module,exports,__webpack_require__){var api=__webpack_require__(24),content=__webpack_require__(855);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},855:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(23),___CSS_LOADER_AT_RULE_IMPORT_0___=__webpack_require__(802);(exports=___CSS_LOADER_API_IMPORT___(!1)).i(___CSS_LOADER_AT_RULE_IMPORT_0___),exports.push([module.i,'/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\r\n\n.ck-vertical-form .ck-button::after {\n\tcontent: "";\n\twidth: 0;\n\tposition: absolute;\n\tright: -1px;\n\ttop: var(--ck-spacing-small);\n\tbottom: var(--ck-spacing-small);\n\tz-index: 1;\n}\n\n.ck.ck-responsive-form {\n\t@mixin ck-media-phone {\n\t\t& .ck-button::after {\n\t\t\tcontent: "";\n\t\t\twidth: 0;\n\t\t\tposition: absolute;\n\t\t\tright: -1px;\n\t\t\ttop: var(--ck-spacing-small);\n\t\t\tbottom: var(--ck-spacing-small);\n\t\t\tz-index: 1;\n\t\t}\n\t}\n}\n',""]),module.exports=exports},856:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/previous-arrow.8b27c40a.svg"},857:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/next-arrow.3c5d80e7.svg"},858:function(module,exports,__webpack_require__){var api=__webpack_require__(24),content=__webpack_require__(859);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},859:function(module,exports,__webpack_require__){(exports=__webpack_require__(23)(!1)).push([module.i,"/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n.ck .ck-balloon-rotator__navigation {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n\n/* Buttons inside a toolbar should be centered when rotator bar is wider.\n * See: https://github.com/ckeditor/ckeditor5-ui/issues/495\n */\n.ck .ck-balloon-rotator__content .ck-toolbar {\n\tjustify-content: center;\n}\n",""]),module.exports=exports},860:function(module,exports,__webpack_require__){var api=__webpack_require__(24),content=__webpack_require__(861);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},861:function(module,exports,__webpack_require__){(exports=__webpack_require__(23)(!1)).push([module.i,"/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n.ck .ck-fake-panel {\n\tposition: absolute;\n\n\t/* Fake panels should be placed under main balloon content. */\n\tz-index: calc(var(--ck-z-modal) - 1);\n}\n\n.ck .ck-fake-panel div {\n\tposition: absolute;\n}\n\n.ck .ck-fake-panel div:nth-child( 1 ) {\n\tz-index: 2;\n}\n\n.ck .ck-fake-panel div:nth-child( 2 ) {\n\tz-index: 1;\n}\n",""]),module.exports=exports},862:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/low-vision.ea3e3589.svg"},863:function(module,exports,__webpack_require__){var api=__webpack_require__(24),content=__webpack_require__(864);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},864:function(module,exports,__webpack_require__){(exports=__webpack_require__(23)(!1)).push([module.i,"/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n.ck-content .image {\n\tdisplay: table;\n\tclear: both;\n\ttext-align: center;\n\n\t/* Make sure there is some space between the content and the image. Center image by default. */\n\tmargin: 1em auto;\n\n\t& img {\n\t\t/* Prevent unnecessary margins caused by line-height (see #44). */\n\t\tdisplay: block;\n\n\t\t/* Center the image if its width is smaller than the content's width. */\n\t\tmargin: 0 auto;\n\n\t\t/* Make sure the image never exceeds the size of the parent container (ckeditor/ckeditor5-ui#67). */\n\t\tmax-width: 100%;\n\n\t\t/* Make sure the caption will be displayed properly (See: https://github.com/ckeditor/ckeditor5/issues/1870). */\n\t\tmin-width: 50px;\n\t}\n}\n",""]),module.exports=exports},874:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"default",(function(){return image_Image}));var src_plugin=__webpack_require__(738),imageloadobserver=__webpack_require__(789);var utils=__webpack_require__(748);function modelToViewAttributeConverter(attributeKey){return dispatcher=>{dispatcher.on(`attribute:${attributeKey}:image`,converter)};function converter(evt,data,conversionApi){if(!conversionApi.consumable.consume(data.item,evt.name))return;const viewWriter=conversionApi.writer,figure=conversionApi.mapper.toViewElement(data.item),img=Object(utils.b)(figure);viewWriter.setAttribute(data.attributeKey,data.attributeNewValue||"",img)}}var src_command=__webpack_require__(774),toarray=__webpack_require__(771);class imageinsertcommand_ImageInsertCommand extends src_command.a{refresh(){this.isEnabled=Object(utils.e)(this.editor.model)}execute(options){const model=this.editor.model;for(const src of Object(toarray.a)(options.source))Object(utils.c)(model,{src:src})}}class imageediting_ImageEditing extends src_plugin.a{static get pluginName(){return"ImageEditing"}init(){const editor=this.editor,schema=editor.model.schema,t=editor.t,conversion=editor.conversion;editor.editing.view.addObserver(imageloadobserver.a),schema.register("image",{isObject:!0,isBlock:!0,allowWhere:"$block",allowAttributes:["alt","src","srcset"]}),conversion.for("dataDowncast").elementToElement({model:"image",view:(modelElement,{writer:writer})=>createImageViewElement(writer)}),conversion.for("editingDowncast").elementToElement({model:"image",view:(modelElement,{writer:writer})=>Object(utils.f)(createImageViewElement(writer),writer,t("image widget"))}),conversion.for("downcast").add(modelToViewAttributeConverter("src")).add(modelToViewAttributeConverter("alt")).add(function srcsetAttributeConverter(){return dispatcher=>{dispatcher.on("attribute:srcset:image",converter)};function converter(evt,data,conversionApi){if(!conversionApi.consumable.consume(data.item,evt.name))return;const writer=conversionApi.writer,figure=conversionApi.mapper.toViewElement(data.item),img=Object(utils.b)(figure);if(null===data.attributeNewValue){const srcset=data.attributeOldValue;srcset.data&&(writer.removeAttribute("srcset",img),writer.removeAttribute("sizes",img),srcset.width&&writer.removeAttribute("width",img))}else{const srcset=data.attributeNewValue;srcset.data&&(writer.setAttribute("srcset",srcset.data,img),writer.setAttribute("sizes","100vw",img),srcset.width&&writer.setAttribute("width",srcset.width,img))}}}()),conversion.for("upcast").elementToElement({view:{name:"img",attributes:{src:!0}},model:(viewImage,{writer:writer})=>writer.createElement("image",{src:viewImage.getAttribute("src")})}).attributeToAttribute({view:{name:"img",key:"alt"},model:"alt"}).attributeToAttribute({view:{name:"img",key:"srcset"},model:{key:"srcset",value:viewImage=>{const value={data:viewImage.getAttribute("srcset")};return viewImage.hasAttribute("width")&&(value.width=viewImage.getAttribute("width")),value}}}).add(function viewFigureToModel(){return dispatcher=>{dispatcher.on("element:figure",converter)};function converter(evt,data,conversionApi){if(!conversionApi.consumable.test(data.viewItem,{name:!0,classes:"image"}))return;const viewImage=Object(utils.b)(data.viewItem);if(!viewImage||!viewImage.hasAttribute("src")||!conversionApi.consumable.test(viewImage,{name:!0}))return;const modelImage=function first(iterable){const iteratorItem=iterable.next();return iteratorItem.done?null:iteratorItem.value}(conversionApi.convertItem(viewImage,data.modelCursor).modelRange.getItems());modelImage&&(conversionApi.convertChildren(data.viewItem,modelImage),conversionApi.updateConversionResult(modelImage,data))}}()),editor.commands.add("imageInsert",new imageinsertcommand_ImageInsertCommand(editor))}}function createImageViewElement(writer){const emptyElement=writer.createEmptyElement("img"),figure=writer.createContainerElement("figure",{class:"image"});return writer.insert(writer.createPositionAt(figure,0),emptyElement),figure}var mouseobserver=__webpack_require__(805),template=__webpack_require__(778),keyboard=__webpack_require__(753),priorities=__webpack_require__(760),widgettypearound_utils=__webpack_require__(798),env=__webpack_require__(775);const safeKeycodes=[Object(keyboard.a)("arrowUp"),Object(keyboard.a)("arrowRight"),Object(keyboard.a)("arrowDown"),Object(keyboard.a)("arrowLeft"),9,16,17,18,19,20,27,33,34,35,36,45,91,93,144,145,173,174,175,176,177,178,179,255];for(let code=112;code<=135;code++)safeKeycodes.push(code);function isNonTypingKeystroke(keyData){return!!keyData.ctrlKey||safeKeycodes.includes(keyData.keyCode)}var return_arrow=__webpack_require__(821),return_arrow_default=__webpack_require__.n(return_arrow);__webpack_require__(822);const POSSIBLE_INSERTION_POSITIONS=["before","after"],RETURN_ARROW_ICON_ELEMENT=(new DOMParser).parseFromString(return_arrow_default.a,"image/svg+xml").firstChild;class widgettypearound_WidgetTypeAround extends src_plugin.a{static get pluginName(){return"WidgetTypeAround"}constructor(editor){super(editor),this._currentFakeCaretModelElement=null}init(){const editor=this.editor,editingView=editor.editing.view;this.on("change:isEnabled",(evt,data,isEnabled)=>{editingView.change(writer=>{for(const root of editingView.document.roots)isEnabled?writer.removeClass("ck-widget__type-around_disabled",root):writer.addClass("ck-widget__type-around_disabled",root)}),isEnabled||editor.model.change(writer=>{writer.removeSelectionAttribute(widgettypearound_utils.a)})}),this._enableTypeAroundUIInjection(),this._enableInsertingParagraphsOnButtonClick(),this._enableInsertingParagraphsOnEnterKeypress(),this._enableInsertingParagraphsOnTypingKeystroke(),this._enableTypeAroundFakeCaretActivationUsingKeyboardArrows(),this._enableDeleteIntegration(),this._enableInsertContentIntegration()}destroy(){this._currentFakeCaretModelElement=null}_insertParagraph(widgetModelElement,position){const editor=this.editor,editingView=editor.editing.view;editor.execute("insertParagraph",{position:editor.model.createPositionAt(widgetModelElement,position)}),editingView.focus(),editingView.scrollToTheSelection()}_listenToIfEnabled(emitter,event,callback,options){this.listenTo(emitter,event,(...args)=>{this.isEnabled&&callback(...args)},options)}_insertParagraphAccordingToFakeCaretPosition(){const modelSelection=this.editor.model.document.selection,typeAroundFakeCaretPosition=Object(widgettypearound_utils.e)(modelSelection);if(!typeAroundFakeCaretPosition)return!1;const selectedModelElement=modelSelection.getSelectedElement();return this._insertParagraph(selectedModelElement,typeAroundFakeCaretPosition),!0}_enableTypeAroundUIInjection(){const editor=this.editor,schema=editor.model.schema,t=editor.locale.t,buttonTitles={before:t("Insert paragraph before block"),after:t("Insert paragraph after block")};editor.editing.downcastDispatcher.on("insert",(evt,data,conversionApi)=>{const viewElement=conversionApi.mapper.toViewElement(data.item);Object(widgettypearound_utils.f)(viewElement,data.item,schema)&&function injectUIIntoWidget(viewWriter,buttonTitles,widgetViewElement){const typeAroundWrapper=viewWriter.createUIElement("div",{class:"ck ck-reset_all ck-widget__type-around"},(function(domDocument){const wrapperDomElement=this.toDomElement(domDocument);return function injectButtons(wrapperDomElement,buttonTitles){for(const position of POSSIBLE_INSERTION_POSITIONS){const buttonTemplate=new template.a({tag:"div",attributes:{class:["ck","ck-widget__type-around__button","ck-widget__type-around__button_"+position],title:buttonTitles[position]},children:[wrapperDomElement.ownerDocument.importNode(RETURN_ARROW_ICON_ELEMENT,!0)]});wrapperDomElement.appendChild(buttonTemplate.render())}}(wrapperDomElement,buttonTitles),function injectFakeCaret(wrapperDomElement){const caretTemplate=new template.a({tag:"div",attributes:{class:["ck","ck-widget__type-around__fake-caret"]}});wrapperDomElement.appendChild(caretTemplate.render())}(wrapperDomElement),wrapperDomElement}));viewWriter.insert(viewWriter.createPositionAt(widgetViewElement,"end"),typeAroundWrapper)}(conversionApi.writer,buttonTitles,viewElement)},{priority:"low"})}_enableTypeAroundFakeCaretActivationUsingKeyboardArrows(){const editor=this.editor,model=editor.model,modelSelection=model.document.selection,schema=model.schema,editingView=editor.editing.view;function positionToWidgetCssClass(position){return"ck-widget_type-around_show-fake-caret_"+position}this._listenToIfEnabled(editingView.document,"keydown",(evt,domEventData)=>{Object(keyboard.c)(domEventData.keyCode)&&this._handleArrowKeyPress(evt,domEventData)},{priority:priorities.a.get("high")+10}),this._listenToIfEnabled(modelSelection,"change:range",(evt,data)=>{data.directChange&&editor.model.change(writer=>{writer.removeSelectionAttribute(widgettypearound_utils.a)})}),this._listenToIfEnabled(model.document,"change:data",()=>{const selectedModelElement=modelSelection.getSelectedElement();if(selectedModelElement){const selectedViewElement=editor.editing.mapper.toViewElement(selectedModelElement);if(Object(widgettypearound_utils.f)(selectedViewElement,selectedModelElement,schema))return}editor.model.change(writer=>{writer.removeSelectionAttribute(widgettypearound_utils.a)})}),this._listenToIfEnabled(editor.editing.downcastDispatcher,"selection",(evt,data,conversionApi)=>{const writer=conversionApi.writer;if(this._currentFakeCaretModelElement){const selectedViewElement=conversionApi.mapper.toViewElement(this._currentFakeCaretModelElement);selectedViewElement&&(writer.removeClass(POSSIBLE_INSERTION_POSITIONS.map(positionToWidgetCssClass),selectedViewElement),this._currentFakeCaretModelElement=null)}const selectedModelElement=data.selection.getSelectedElement();if(!selectedModelElement)return;const selectedViewElement=conversionApi.mapper.toViewElement(selectedModelElement);if(!Object(widgettypearound_utils.f)(selectedViewElement,selectedModelElement,schema))return;const typeAroundFakeCaretPosition=Object(widgettypearound_utils.e)(data.selection);typeAroundFakeCaretPosition&&(writer.addClass(positionToWidgetCssClass(typeAroundFakeCaretPosition),selectedViewElement),this._currentFakeCaretModelElement=selectedModelElement)}),this._listenToIfEnabled(editor.ui.focusTracker,"change:isFocused",(evt,name,isFocused)=>{isFocused||editor.model.change(writer=>{writer.removeSelectionAttribute(widgettypearound_utils.a)})})}_handleArrowKeyPress(evt,domEventData){const editor=this.editor,model=editor.model,modelSelection=model.document.selection,schema=model.schema,editingView=editor.editing.view,keyCode=domEventData.keyCode,isForward=Object(keyboard.d)(keyCode,editor.locale.contentLanguageDirection),selectedViewElement=editingView.document.selection.getSelectedElement(),selectedModelElement=editor.editing.mapper.toModelElement(selectedViewElement);let shouldStopAndPreventDefault;Object(widgettypearound_utils.f)(selectedViewElement,selectedModelElement,schema)?shouldStopAndPreventDefault=this._handleArrowKeyPressOnSelectedWidget(isForward):modelSelection.isCollapsed&&(shouldStopAndPreventDefault=this._handleArrowKeyPressWhenSelectionNextToAWidget(isForward)),shouldStopAndPreventDefault&&(domEventData.preventDefault(),evt.stop())}_handleArrowKeyPressOnSelectedWidget(isForward){const model=this.editor.model,modelSelection=model.document.selection,typeAroundFakeCaretPosition=Object(widgettypearound_utils.e)(modelSelection);return model.change(writer=>{if(!typeAroundFakeCaretPosition)return writer.setSelectionAttribute(widgettypearound_utils.a,isForward?"after":"before"),!0;if(!(typeAroundFakeCaretPosition===(isForward?"after":"before")))return writer.removeSelectionAttribute(widgettypearound_utils.a),!0;return!1})}_handleArrowKeyPressWhenSelectionNextToAWidget(isForward){const editor=this.editor,model=editor.model,schema=model.schema,widgetPlugin=editor.plugins.get("Widget"),modelElementNextToSelection=widgetPlugin._getObjectElementNextToSelection(isForward),viewElementNextToSelection=editor.editing.mapper.toViewElement(modelElementNextToSelection);return!!Object(widgettypearound_utils.f)(viewElementNextToSelection,modelElementNextToSelection,schema)&&(model.change(writer=>{widgetPlugin._setSelectionOverElement(modelElementNextToSelection),writer.setSelectionAttribute(widgettypearound_utils.a,isForward?"before":"after")}),!0)}_enableInsertingParagraphsOnButtonClick(){const editor=this.editor,editingView=editor.editing.view;this._listenToIfEnabled(editingView.document,"mousedown",(evt,domEventData)=>{const button=Object(widgettypearound_utils.b)(domEventData.domTarget);if(!button)return;const buttonPosition=Object(widgettypearound_utils.d)(button),widgetViewElement=Object(widgettypearound_utils.c)(button,editingView.domConverter),widgetModelElement=editor.editing.mapper.toModelElement(widgetViewElement);this._insertParagraph(widgetModelElement,buttonPosition),domEventData.preventDefault(),evt.stop()})}_enableInsertingParagraphsOnEnterKeypress(){const editor=this.editor,editingView=editor.editing.view;this._listenToIfEnabled(editingView.document,"enter",(evt,domEventData)=>{const selectedViewElement=editingView.document.selection.getSelectedElement(),selectedModelElement=editor.editing.mapper.toModelElement(selectedViewElement),schema=editor.model.schema;let wasHandled;this._insertParagraphAccordingToFakeCaretPosition()?wasHandled=!0:Object(widgettypearound_utils.f)(selectedViewElement,selectedModelElement,schema)&&(this._insertParagraph(selectedModelElement,domEventData.isSoft?"before":"after"),wasHandled=!0),wasHandled&&(domEventData.preventDefault(),evt.stop())})}_enableInsertingParagraphsOnTypingKeystroke(){const editingView=this.editor.editing.view,keyCodesHandledSomewhereElse=[keyboard.e.enter,keyboard.e.delete,keyboard.e.backspace];this._listenToIfEnabled(editingView.document,"keydown",(evt,domEventData)=>{keyCodesHandledSomewhereElse.includes(domEventData.keyCode)||isNonTypingKeystroke(domEventData)||this._insertParagraphAccordingToFakeCaretPosition()},{priority:priorities.a.get("high")+1})}_enableDeleteIntegration(){const editor=this.editor,editingView=editor.editing.view,model=editor.model,schema=model.schema;this._listenToIfEnabled(editingView.document,"delete",(evt,domEventData)=>{const typeAroundFakeCaretPosition=Object(widgettypearound_utils.e)(model.document.selection);if(!typeAroundFakeCaretPosition)return;const direction=domEventData.direction,selectedModelWidget=model.document.selection.getSelectedElement(),isForwardDelete="forward"==direction;if("before"===typeAroundFakeCaretPosition===isForwardDelete)editor.execute("delete",{selection:model.createSelection(selectedModelWidget,"on")});else{const range=schema.getNearestSelectionRange(model.createPositionAt(selectedModelWidget,typeAroundFakeCaretPosition),direction);if(range)if(range.isCollapsed){const probe=model.createSelection(range.start);if(model.modifySelection(probe,{direction:direction}),probe.focus.isEqual(range.start)){const deepestEmptyRangeAncestor=function getDeepestEmptyElementAncestor(schema,element){let deepestEmptyAncestor=element;for(const ancestor of element.getAncestors({parentFirst:!0})){if(ancestor.childCount>1||schema.isLimit(ancestor))break;deepestEmptyAncestor=ancestor}return deepestEmptyAncestor}(schema,range.start.parent);model.deleteContent(model.createSelection(deepestEmptyRangeAncestor,"on"),{doNotAutoparagraph:!0})}else model.change(writer=>{writer.setSelection(range),editor.execute(isForwardDelete?"forwardDelete":"delete")})}else model.change(writer=>{writer.setSelection(range),editor.execute(isForwardDelete?"forwardDelete":"delete")})}domEventData.preventDefault(),evt.stop()},{priority:priorities.a.get("high")+1})}_enableInsertContentIntegration(){const editor=this.editor,model=this.editor.model,documentSelection=model.document.selection;this._listenToIfEnabled(editor.model,"insertContent",(evt,[content,selectable])=>{if(selectable&&!selectable.is("documentSelection"))return;const typeAroundFakeCaretPosition=Object(widgettypearound_utils.e)(documentSelection);return typeAroundFakeCaretPosition?(evt.stop(),model.change(writer=>{const selectedElement=documentSelection.getSelectedElement(),position=model.createPositionAt(selectedElement,typeAroundFakeCaretPosition),selection=writer.createSelection(position),result=model.insertContent(content,selection);return writer.setSelection(selection),result})):void 0},{priority:"high"})}}var src_utils=__webpack_require__(779),rect=(__webpack_require__(824),__webpack_require__(747));function verticalNavigationHandler(editing){const model=editing.model;return(evt,data)=>{const arrowUpPressed=data.keyCode==keyboard.e.arrowup,arrowDownPressed=data.keyCode==keyboard.e.arrowdown,expandSelection=data.shiftKey,selection=model.document.selection;if(!arrowUpPressed&&!arrowDownPressed)return;const isForward=arrowDownPressed;if(expandSelection&&function selectionWillShrink(selection,isForward){return!selection.isCollapsed&&selection.isBackward==isForward}(selection,isForward))return;const range=function findTextRangeFromSelection(editing,selection,isForward){const model=editing.model;if(isForward){const startPosition=selection.isCollapsed?selection.focus:selection.getLastPosition(),endPosition=getNearestNonInlineLimit(model,startPosition,"forward");if(!endPosition)return null;const range=model.createRange(startPosition,endPosition),lastRangePosition=getNearestTextPosition(model.schema,range,"backward");return lastRangePosition&&startPosition.isBefore(lastRangePosition)?model.createRange(startPosition,lastRangePosition):null}{const endPosition=selection.isCollapsed?selection.focus:selection.getFirstPosition(),startPosition=getNearestNonInlineLimit(model,endPosition,"backward");if(!startPosition)return null;const range=model.createRange(startPosition,endPosition),firstRangePosition=getNearestTextPosition(model.schema,range,"forward");return firstRangePosition&&endPosition.isAfter(firstRangePosition)?model.createRange(firstRangePosition,endPosition):null}}(editing,selection,isForward);range&&!range.isCollapsed&&function isSingleLineRange(editing,modelRange,isForward){const model=editing.model,domConverter=editing.view.domConverter;if(isForward){const probe=model.createSelection(modelRange.start);model.modifySelection(probe),probe.focus.isAtEnd||modelRange.start.isEqual(probe.focus)||(modelRange=model.createRange(probe.focus,modelRange.end))}const viewRange=editing.mapper.toViewRange(modelRange),domRange=domConverter.viewRangeToDom(viewRange),rects=rect.a.getDomRangeRects(domRange);let boundaryVerticalPosition;for(const rect of rects)if(void 0!==boundaryVerticalPosition){if(Math.round(rect.top)>=boundaryVerticalPosition)return!1;boundaryVerticalPosition=Math.max(boundaryVerticalPosition,Math.round(rect.bottom))}else boundaryVerticalPosition=Math.round(rect.bottom);return!0}(editing,range,isForward)&&(model.change(writer=>{const newPosition=isForward?range.end:range.start;if(expandSelection){const newSelection=model.createSelection(selection.anchor);newSelection.setFocus(newPosition),writer.setSelection(newSelection)}else writer.setSelection(newPosition)}),evt.stop(),data.preventDefault(),data.stopPropagation())}}function getNearestNonInlineLimit(model,startPosition,direction){const schema=model.schema,range=model.createRangeIn(startPosition.root),walkerValueType="forward"==direction?"elementStart":"elementEnd";for(const{previousPosition:previousPosition,item:item,type:type}of range.getWalker({startPosition:startPosition,direction:direction})){if(schema.isLimit(item)&&!schema.isInline(item))return previousPosition;if(type==walkerValueType&&schema.isBlock(item))return null}return null}function getNearestTextPosition(schema,range,direction){const position="backward"==direction?range.end:range.start;if(schema.checkChild(position,"$text"))return position;for(const{nextPosition:nextPosition}of range.getWalker({direction:direction}))if(schema.checkChild(nextPosition,"$text"))return nextPosition}class widget_Widget extends src_plugin.a{static get pluginName(){return"Widget"}static get requires(){return[widgettypearound_WidgetTypeAround]}init(){const view=this.editor.editing.view,viewDocument=view.document;this._previouslySelected=new Set,this.editor.editing.downcastDispatcher.on("selection",(evt,data,conversionApi)=>{this._clearPreviouslySelectedWidgets(conversionApi.writer);const viewWriter=conversionApi.writer,viewSelection=viewWriter.document.selection,selectedElement=viewSelection.getSelectedElement();let lastMarked=null;for(const range of viewSelection.getRanges())for(const value of range){const node=value.item;Object(src_utils.d)(node)&&!isChild(node,lastMarked)&&(viewWriter.addClass(src_utils.a,node),this._previouslySelected.add(node),lastMarked=node,node==selectedElement&&viewWriter.setSelection(viewSelection.getRanges(),{fake:!0,label:Object(src_utils.c)(selectedElement)}))}},{priority:"low"}),view.addObserver(mouseobserver.a),this.listenTo(viewDocument,"mousedown",(...args)=>this._onMousedown(...args)),this.listenTo(viewDocument,"keydown",(...args)=>{this._handleSelectionChangeOnArrowKeyPress(...args)},{priority:"high"}),this.listenTo(viewDocument,"keydown",(...args)=>{this._preventDefaultOnArrowKeyPress(...args)},{priority:priorities.a.get("high")-20}),this.listenTo(viewDocument,"keydown",verticalNavigationHandler(this.editor.editing)),this.listenTo(viewDocument,"delete",(evt,data)=>{this._handleDelete("forward"==data.direction)&&(data.preventDefault(),evt.stop())},{priority:"high"})}_onMousedown(eventInfo,domEventData){const editor=this.editor,view=editor.editing.view,viewDocument=view.document;let element=domEventData.target;if(function isInsideNestedEditable(element){for(;element;){if(element.is("editableElement")&&!element.is("rootElement"))return!0;if(Object(src_utils.d)(element))return!1;element=element.parent}return!1}(element)){if((env.a.isSafari||env.a.isGecko)&&domEventData.domEvent.detail>=3){const mapper=editor.editing.mapper,viewElement=element.is("attributeElement")?element.findAncestor(element=>!element.is("attributeElement")):element,modelElement=mapper.toModelElement(viewElement);domEventData.preventDefault(),this.editor.model.change(writer=>{writer.setSelection(modelElement,"in")})}return}if(!Object(src_utils.d)(element)&&(element=element.findAncestor(src_utils.d),!element))return;domEventData.preventDefault(),viewDocument.isFocused||view.focus();const modelElement=editor.editing.mapper.toModelElement(element);this._setSelectionOverElement(modelElement)}_handleSelectionChangeOnArrowKeyPress(eventInfo,domEventData){const keyCode=domEventData.keyCode;if(!Object(keyboard.c)(keyCode))return;const model=this.editor.model,schema=model.schema,modelSelection=model.document.selection,objectElement=modelSelection.getSelectedElement(),isForward=Object(keyboard.d)(keyCode,this.editor.locale.contentLanguageDirection);if(objectElement&&schema.isObject(objectElement)){const position=isForward?modelSelection.getLastPosition():modelSelection.getFirstPosition(),newRange=schema.getNearestSelectionRange(position,isForward?"forward":"backward");return void(newRange&&(model.change(writer=>{writer.setSelection(newRange)}),domEventData.preventDefault(),eventInfo.stop()))}if(!modelSelection.isCollapsed)return;const objectElementNextToSelection=this._getObjectElementNextToSelection(isForward);objectElementNextToSelection&&schema.isObject(objectElementNextToSelection)&&(this._setSelectionOverElement(objectElementNextToSelection),domEventData.preventDefault(),eventInfo.stop())}_preventDefaultOnArrowKeyPress(eventInfo,domEventData){const keyCode=domEventData.keyCode;if(!Object(keyboard.c)(keyCode))return;const model=this.editor.model,schema=model.schema,objectElement=model.document.selection.getSelectedElement();objectElement&&schema.isObject(objectElement)&&(domEventData.preventDefault(),eventInfo.stop())}_handleDelete(isForward){if(this.editor.isReadOnly)return;const modelSelection=this.editor.model.document.selection;if(!modelSelection.isCollapsed)return;const objectElement=this._getObjectElementNextToSelection(isForward);return objectElement?(this.editor.model.change(writer=>{let previousNode=modelSelection.anchor.parent;for(;previousNode.isEmpty;){const nodeToRemove=previousNode;previousNode=nodeToRemove.parent,writer.remove(nodeToRemove)}this._setSelectionOverElement(objectElement)}),!0):void 0}_setSelectionOverElement(element){this.editor.model.change(writer=>{writer.setSelection(writer.createRangeOn(element))})}_getObjectElementNextToSelection(forward){const model=this.editor.model,schema=model.schema,modelSelection=model.document.selection,probe=model.createSelection(modelSelection);model.modifySelection(probe,{direction:forward?"forward":"backward"});const objectElement=forward?probe.focus.nodeBefore:probe.focus.nodeAfter;return objectElement&&schema.isObject(objectElement)?objectElement:null}_clearPreviouslySelectedWidgets(writer){for(const widget of this._previouslySelected)writer.removeClass(src_utils.a,widget);this._previouslySelected.clear()}}function isChild(element,parent){return!!parent&&Array.from(element.getAncestors()).includes(parent)}class imagetextalternativecommand_ImageTextAlternativeCommand extends src_command.a{refresh(){const element=this.editor.model.document.selection.getSelectedElement();this.isEnabled=Object(utils.d)(element),Object(utils.d)(element)&&element.hasAttribute("alt")?this.value=element.getAttribute("alt"):this.value=!1}execute(options){const model=this.editor.model,imageElement=model.document.selection.getSelectedElement();model.change(writer=>{writer.setAttribute("alt",options.newValue,imageElement)})}}class imagetextalternativeediting_ImageTextAlternativeEditing extends src_plugin.a{static get pluginName(){return"ImageTextAlternativeEditing"}init(){this.editor.commands.add("imageTextAlternative",new imagetextalternativecommand_ImageTextAlternativeCommand(this.editor))}}var buttonview=__webpack_require__(750),clickoutsidehandler=__webpack_require__(800),src_view=__webpack_require__(737),viewcollection=__webpack_require__(769),uid=__webpack_require__(751);__webpack_require__(830);class labelview_LabelView extends src_view.a{constructor(locale){super(locale),this.set("text"),this.set("for"),this.id="ck-editor__label_"+Object(uid.a)();const bind=this.bindTemplate;this.setTemplate({tag:"label",attributes:{class:["ck","ck-label"],id:this.id,for:bind.to("for")},children:[{text:bind.to("text")}]})}}__webpack_require__(832);class labeledfieldview_LabeledFieldView extends src_view.a{constructor(locale,viewCreator){super(locale);const viewUid="ck-labeled-field-view-"+Object(uid.a)(),statusUid="ck-labeled-field-view-status-"+Object(uid.a)();this.fieldView=viewCreator(this,viewUid,statusUid),this.set("label"),this.set("isEnabled",!0),this.set("isEmpty",!0),this.set("isFocused",!1),this.set("errorText",null),this.set("infoText",null),this.set("class"),this.set("placeholder"),this.labelView=this._createLabelView(viewUid),this.statusView=this._createStatusView(statusUid),this.bind("_statusText").to(this,"errorText",this,"infoText",(errorText,infoText)=>errorText||infoText);const bind=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view",bind.to("class"),bind.if("isEnabled","ck-disabled",value=>!value),bind.if("isEmpty","ck-labeled-field-view_empty"),bind.if("isFocused","ck-labeled-field-view_focused"),bind.if("placeholder","ck-labeled-field-view_placeholder"),bind.if("errorText","ck-error")]},children:[{tag:"div",attributes:{class:["ck","ck-labeled-field-view__input-wrapper"]},children:[this.fieldView,this.labelView]},this.statusView]})}_createLabelView(id){const labelView=new labelview_LabelView(this.locale);return labelView.for=id,labelView.bind("text").to(this,"label"),labelView}_createStatusView(statusUid){const statusView=new src_view.a(this.locale),bind=this.bindTemplate;return statusView.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view__status",bind.if("errorText","ck-labeled-field-view__status_error"),bind.if("_statusText","ck-hidden",value=>!value)],id:statusUid,role:bind.if("errorText","alert")},children:[{text:bind.to("_statusText")}]}),statusView}focus(){this.fieldView.focus()}}var focustracker=__webpack_require__(756);__webpack_require__(834);class inputtextview_InputTextView extends src_view.a{constructor(locale){super(locale),this.set("value"),this.set("id"),this.set("placeholder"),this.set("isReadOnly",!1),this.set("hasError",!1),this.set("ariaDescribedById"),this.focusTracker=new focustracker.a,this.bind("isFocused").to(this.focusTracker),this.set("isEmpty",!0);const bind=this.bindTemplate;this.setTemplate({tag:"input",attributes:{type:"text",class:["ck","ck-input","ck-input-text",bind.if("isFocused","ck-input_focused"),bind.if("isEmpty","ck-input-text_empty"),bind.if("hasError","ck-error")],id:bind.to("id"),placeholder:bind.to("placeholder"),readonly:bind.to("isReadOnly"),"aria-invalid":bind.if("hasError",!0),"aria-describedby":bind.to("ariaDescribedById")},on:{input:bind.to("input"),change:bind.to(this._updateIsEmpty.bind(this))}})}render(){super.render(),this.focusTracker.add(this.element),this._setDomElementValue(this.value),this._updateIsEmpty(),this.on("change:value",(evt,name,value)=>{this._setDomElementValue(value),this._updateIsEmpty()})}select(){this.element.select()}focus(){this.element.focus()}_updateIsEmpty(){this.isEmpty=function isInputElementEmpty(domElement){return!domElement.value}(this.element)}_setDomElementValue(value){this.element.value=value||0===value?value:""}}__webpack_require__(803);function createLabeledInputText(labeledFieldView,viewUid,statusUid){const inputView=new inputtextview_InputTextView(labeledFieldView.locale);return inputView.set({id:viewUid,ariaDescribedById:statusUid}),inputView.bind("isReadOnly").to(labeledFieldView,"isEnabled",value=>!value),inputView.bind("hasError").to(labeledFieldView,"errorText",value=>!!value),inputView.on("input",()=>{labeledFieldView.errorText=null}),labeledFieldView.bind("isEmpty","isFocused","placeholder").to(inputView),inputView}var keystrokehandler=__webpack_require__(758),focuscycler=__webpack_require__(777),check=__webpack_require__(850),check_default=__webpack_require__.n(check),cancel=__webpack_require__(851),cancel_default=__webpack_require__.n(cancel);__webpack_require__(852),__webpack_require__(854);class textalternativeformview_TextAlternativeFormView extends src_view.a{constructor(locale){super(locale);const t=this.locale.t;this.focusTracker=new focustracker.a,this.keystrokes=new keystrokehandler.a,this.labeledInput=this._createLabeledInputView(),this.saveButtonView=this._createButton(t("Save"),check_default.a,"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton(t("Cancel"),cancel_default.a,"ck-button-cancel","cancel"),this._focusables=new viewcollection.a,this._focusCycler=new focuscycler.a({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"form",attributes:{class:["ck","ck-text-alternative-form","ck-responsive-form"],tabindex:"-1"},children:[this.labeledInput,this.saveButtonView,this.cancelButtonView]}),function injectCssTransitionDisabler(view){view.set("_isCssTransitionsDisabled",!1),view.disableCssTransitions=()=>{view._isCssTransitionsDisabled=!0},view.enableCssTransitions=()=>{view._isCssTransitionsDisabled=!1},view.extendTemplate({attributes:{class:[view.bindTemplate.if("_isCssTransitionsDisabled","ck-transitions-disabled")]}})}(this)}render(){super.render(),this.keystrokes.listenTo(this.element),function submitHandler({view:view}){view.listenTo(view.element,"submit",(evt,domEvt)=>{domEvt.preventDefault(),view.fire("submit")},{useCapture:!0})}({view:this}),[this.labeledInput,this.saveButtonView,this.cancelButtonView].forEach(v=>{this._focusables.add(v),this.focusTracker.add(v.element)})}_createButton(label,icon,className,eventName){const button=new buttonview.a(this.locale);return button.set({label:label,icon:icon,tooltip:!0}),button.extendTemplate({attributes:{class:className}}),eventName&&button.delegate("execute").to(this,eventName),button}_createLabeledInputView(){const t=this.locale.t,labeledInput=new labeledfieldview_LabeledFieldView(this.locale,createLabeledInputText);return labeledInput.label=t("Text alternative"),labeledInput}}var balloonpanelview=__webpack_require__(773),ckeditorerror=__webpack_require__(739),tounit=__webpack_require__(797),previous_arrow=__webpack_require__(856),previous_arrow_default=__webpack_require__.n(previous_arrow),next_arrow=__webpack_require__(857),next_arrow_default=__webpack_require__.n(next_arrow);__webpack_require__(858),__webpack_require__(860);const toPx=Object(tounit.a)("px");class contextualballoon_ContextualBalloon extends src_plugin.a{static get pluginName(){return"ContextualBalloon"}constructor(editor){super(editor),this.positionLimiter=()=>{const view=this.editor.editing.view,editableElement=view.document.selection.editableElement;return editableElement?view.domConverter.mapViewToDom(editableElement.root):null},this.set("visibleView",null),this.view=new balloonpanelview.a(editor.locale),editor.ui.view.body.add(this.view),editor.ui.focusTracker.add(this.view.element),this._viewToStack=new Map,this._idToStack=new Map,this.set("_numberOfStacks",0),this.set("_singleViewMode",!1),this._rotatorView=this._createRotatorView(),this._fakePanelsView=this._createFakePanelsView()}hasView(view){return Array.from(this._viewToStack.keys()).includes(view)}add(data){if(this.hasView(data.view))throw new ckeditorerror.a("contextualballoon-add-view-exist",[this,data]);const stackId=data.stackId||"main";if(!this._idToStack.has(stackId))return this._idToStack.set(stackId,new Map([[data.view,data]])),this._viewToStack.set(data.view,this._idToStack.get(stackId)),this._numberOfStacks=this._idToStack.size,void(this._visibleStack&&!data.singleViewMode||this.showStack(stackId));const stack=this._idToStack.get(stackId);data.singleViewMode&&this.showStack(stackId),stack.set(data.view,data),this._viewToStack.set(data.view,stack),stack===this._visibleStack&&this._showView(data)}remove(view){if(!this.hasView(view))throw new ckeditorerror.a("contextualballoon-remove-view-not-exist",[this,view]);const stack=this._viewToStack.get(view);this._singleViewMode&&this.visibleView===view&&(this._singleViewMode=!1),this.visibleView===view&&(1===stack.size?this._idToStack.size>1?this._showNextStack():(this.view.hide(),this.visibleView=null,this._rotatorView.hideView()):this._showView(Array.from(stack.values())[stack.size-2])),1===stack.size?(this._idToStack.delete(this._getStackId(stack)),this._numberOfStacks=this._idToStack.size):stack.delete(view),this._viewToStack.delete(view)}updatePosition(position){position&&(this._visibleStack.get(this.visibleView).position=position),this.view.pin(this._getBalloonPosition()),this._fakePanelsView.updatePosition()}showStack(id){this.visibleStack=id;const stack=this._idToStack.get(id);if(!stack)throw new ckeditorerror.a("contextualballoon-showstack-stack-not-exist",this);this._visibleStack!==stack&&this._showView(Array.from(stack.values()).pop())}get _visibleStack(){return this._viewToStack.get(this.visibleView)}_getStackId(stack){return Array.from(this._idToStack.entries()).find(entry=>entry[1]===stack)[0]}_showNextStack(){const stacks=Array.from(this._idToStack.values());let nextIndex=stacks.indexOf(this._visibleStack)+1;stacks[nextIndex]||(nextIndex=0),this.showStack(this._getStackId(stacks[nextIndex]))}_showPrevStack(){const stacks=Array.from(this._idToStack.values());let nextIndex=stacks.indexOf(this._visibleStack)-1;stacks[nextIndex]||(nextIndex=stacks.length-1),this.showStack(this._getStackId(stacks[nextIndex]))}_createRotatorView(){const view=new contextualballoon_RotatorView(this.editor.locale),t=this.editor.locale.t;return this.view.content.add(view),view.bind("isNavigationVisible").to(this,"_numberOfStacks",this,"_singleViewMode",(value,isSingleViewMode)=>!isSingleViewMode&&value>1),view.on("change:isNavigationVisible",()=>this.updatePosition(),{priority:"low"}),view.bind("counter").to(this,"visibleView",this,"_numberOfStacks",(visibleView,numberOfStacks)=>{if(numberOfStacks<2)return"";const current=Array.from(this._idToStack.values()).indexOf(this._visibleStack)+1;return t("%0 of %1",[current,numberOfStacks])}),view.buttonNextView.on("execute",()=>{view.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showNextStack()}),view.buttonPrevView.on("execute",()=>{view.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showPrevStack()}),view}_createFakePanelsView(){const view=new contextualballoon_FakePanelsView(this.editor.locale,this.view);return view.bind("numberOfPanels").to(this,"_numberOfStacks",this,"_singleViewMode",(number,isSingleViewMode)=>!isSingleViewMode&&number>=2?Math.min(number-1,2):0),view.listenTo(this.view,"change:top",()=>view.updatePosition()),view.listenTo(this.view,"change:left",()=>view.updatePosition()),this.editor.ui.view.body.add(view),view}_showView({view:view,balloonClassName:balloonClassName="",withArrow:withArrow=!0,singleViewMode:singleViewMode=!1}){this.view.class=balloonClassName,this.view.withArrow=withArrow,this._rotatorView.showView(view),this.visibleView=view,this.view.pin(this._getBalloonPosition()),this._fakePanelsView.updatePosition(),singleViewMode&&(this._singleViewMode=!0)}_getBalloonPosition(){let position=Array.from(this._visibleStack.values()).pop().position;return position&&!position.limiter&&(position=Object.assign({},position,{limiter:this.positionLimiter})),position}}class contextualballoon_RotatorView extends src_view.a{constructor(locale){super(locale);const t=locale.t,bind=this.bindTemplate;this.set("isNavigationVisible",!0),this.focusTracker=new focustracker.a,this.buttonPrevView=this._createButtonView(t("Previous"),previous_arrow_default.a),this.buttonNextView=this._createButtonView(t("Next"),next_arrow_default.a),this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-rotator"],"z-index":"-1"},children:[{tag:"div",attributes:{class:["ck-balloon-rotator__navigation",bind.to("isNavigationVisible",value=>value?"":"ck-hidden")]},children:[this.buttonPrevView,{tag:"span",attributes:{class:["ck-balloon-rotator__counter"]},children:[{text:bind.to("counter")}]},this.buttonNextView]},{tag:"div",attributes:{class:"ck-balloon-rotator__content"},children:this.content}]})}render(){super.render(),this.focusTracker.add(this.element)}showView(view){this.hideView(),this.content.add(view)}hideView(){this.content.clear()}_createButtonView(label,icon){const view=new buttonview.a(this.locale);return view.set({label:label,icon:icon,tooltip:!0}),view}}class contextualballoon_FakePanelsView extends src_view.a{constructor(locale,balloonPanelView){super(locale);const bind=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("height",0),this.set("width",0),this.set("numberOfPanels",0),this.content=this.createCollection(),this._balloonPanelView=balloonPanelView,this.setTemplate({tag:"div",attributes:{class:["ck-fake-panel",bind.to("numberOfPanels",number=>number?"":"ck-hidden")],style:{top:bind.to("top",toPx),left:bind.to("left",toPx),width:bind.to("width",toPx),height:bind.to("height",toPx)}},children:this.content}),this.on("change:numberOfPanels",(evt,name,next,prev)=>{next>prev?this._addPanels(next-prev):this._removePanels(prev-next),this.updatePosition()})}_addPanels(number){for(;number--;){const view=new src_view.a;view.setTemplate({tag:"div"}),this.content.add(view),this.registerChild(view)}}_removePanels(number){for(;number--;){const view=this.content.last;this.content.remove(view),this.deregisterChild(view),view.destroy()}}updatePosition(){if(this.numberOfPanels){const{top:top,left:left}=this._balloonPanelView,{width:width,height:height}=new rect.a(this._balloonPanelView.element);Object.assign(this,{top:top,left:left,width:width,height:height})}}}var low_vision=__webpack_require__(862),low_vision_default=__webpack_require__.n(low_vision);function getBalloonPositionData(editor){const editingView=editor.editing.view,defaultPositions=balloonpanelview.a.defaultPositions;return{target:editingView.domConverter.viewToDom(editingView.document.selection.getSelectedElement()),positions:[defaultPositions.northArrowSouth,defaultPositions.northArrowSouthWest,defaultPositions.northArrowSouthEast,defaultPositions.southArrowNorth,defaultPositions.southArrowNorthWest,defaultPositions.southArrowNorthEast]}}class imagetextalternativeui_ImageTextAlternativeUI extends src_plugin.a{static get requires(){return[contextualballoon_ContextualBalloon]}static get pluginName(){return"ImageTextAlternativeUI"}init(){this._createButton(),this._createForm()}destroy(){super.destroy(),this._form.destroy()}_createButton(){const editor=this.editor,t=editor.t;editor.ui.componentFactory.add("imageTextAlternative",locale=>{const command=editor.commands.get("imageTextAlternative"),view=new buttonview.a(locale);return view.set({label:t("Change image text alternative"),icon:low_vision_default.a,tooltip:!0}),view.bind("isEnabled").to(command,"isEnabled"),this.listenTo(view,"execute",()=>{this._showForm()}),view})}_createForm(){const editor=this.editor,viewDocument=editor.editing.view.document;this._balloon=this.editor.plugins.get("ContextualBalloon"),this._form=new textalternativeformview_TextAlternativeFormView(editor.locale),this._form.render(),this.listenTo(this._form,"submit",()=>{editor.execute("imageTextAlternative",{newValue:this._form.labeledInput.fieldView.element.value}),this._hideForm(!0)}),this.listenTo(this._form,"cancel",()=>{this._hideForm(!0)}),this._form.keystrokes.set("Esc",(data,cancel)=>{this._hideForm(!0),cancel()}),this.listenTo(editor.ui,"update",()=>{Object(utils.a)(viewDocument.selection)?this._isVisible&&function repositionContextualBalloon(editor){const balloon=editor.plugins.get("ContextualBalloon");if(Object(utils.a)(editor.editing.view.document.selection)){const position=getBalloonPositionData(editor);balloon.updatePosition(position)}}(editor):this._hideForm(!0)}),Object(clickoutsidehandler.a)({emitter:this._form,activator:()=>this._isVisible,contextElements:[this._balloon.view.element],callback:()=>this._hideForm()})}_showForm(){if(this._isVisible)return;const editor=this.editor,command=editor.commands.get("imageTextAlternative"),labeledInput=this._form.labeledInput;this._form.disableCssTransitions(),this._isInBalloon||this._balloon.add({view:this._form,position:getBalloonPositionData(editor)}),labeledInput.fieldView.value=labeledInput.fieldView.element.value=command.value||"",this._form.labeledInput.fieldView.select(),this._form.enableCssTransitions()}_hideForm(focusEditable){this._isInBalloon&&(this._form.focusTracker.isFocused&&this._form.saveButtonView.focus(),this._balloon.remove(this._form),focusEditable&&this.editor.editing.view.focus())}get _isVisible(){return this._balloon.visibleView===this._form}get _isInBalloon(){return this._balloon.hasView(this._form)}}class imagetextalternative_ImageTextAlternative extends src_plugin.a{static get requires(){return[imagetextalternativeediting_ImageTextAlternativeEditing,imagetextalternativeui_ImageTextAlternativeUI]}static get pluginName(){return"ImageTextAlternative"}}__webpack_require__(863);class image_Image extends src_plugin.a{static get requires(){return[imageediting_ImageEditing,widget_Widget,imagetextalternative_ImageTextAlternative]}static get pluginName(){return"Image"}}}}]);
//# sourceMappingURL=4.52ef1f92ddcb046f3066.bundle.js.map